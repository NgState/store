!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("immer"),require("@angular/core"),require("@ng-state/data-strategy")):"function"==typeof define&&define.amd?define("@ng-state/immer-data-strategy",["exports","immer","@angular/core","@ng-state/data-strategy"],r):r((t["ng-state"]=t["ng-state"]||{},t["ng-state"]["immer-data-strategy"]={}),t.immer,t.ng.core,t.dataStrategy)}(this,function(t,u,r,e){"use strict";var o=function(t,r){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(t,r)};function n(t,r){var e="function"==typeof Symbol&&t[Symbol.iterator];if(!e)return t;var o,n,i=e.call(t),u=[];try{for(;(void 0===r||0<r--)&&!(o=i.next()).done;)u.push(o.value)}catch(s){n={error:s}}finally{try{o&&!o.done&&(e=i["return"])&&e.call(i)}finally{if(n)throw n.error}}return u}function i(){for(var t=[],r=0;r<arguments.length;r++)t=t.concat(n(arguments[r]));return t}var s,a=(function y(t,r){function e(){this.constructor=t}o(t,r),t.prototype=null===r?Object.create(r):(e.prototype=r.prototype,new e)}(c,s=e.DataStrategy),c.prototype.init=function(t,r){s.prototype.init.call(this,t,r),u.setAutoFreeze(!r)},c.prototype.getIn=function(t,r){return this.getCursor(t,r)},c.prototype.get=function(t,r){return t[r]},c.prototype.fromJS=function(t){return t},c.prototype.toJS=function(t){return t},c.prototype.set=function(t,r,e){return t[r]=e,t},c.prototype.setIn=function(t,o,r,e){var n=this;function i(t,r,e){if(!n.setValue(t,r,e))throw new Error("State was not set in "+o)}if(void 0===e&&(e={}),!e.fromUpdate)return u.produce(t,function(t){i(t,o,r)});i(t,o,r)},c.prototype.merge=function(t,r){if(this.isConstructorArray(t))t.push.apply(r);else{if(!this.isConstructorObject(t))throw new Error(t+" cannot be merged because type is not supported");this.extend(t,r)}},c.prototype.update=function(e,o){var n=this,t=u.produce(this.currentState,function(t){var r=n.getCursor(t,e);o(r)});this.rootStore.next(t)},c.prototype.overrideContructor=function(t){},c.prototype.isObject=function(t){return null!==t&&"object"==typeof t},c.prototype.resetRoot=function(t,r){var e=this,o=this.currentState,n=this.get(o,"router"),i=u.produce(t,function(t){e.set(t,"router",n),e.setIn(t,["router","url"],r,{fromUpdate:!0})});this.rootStore.next(i)},c.prototype.reset=function(r,e){var o=this,t=this.currentState,n=u.produce(t,function(t){o.setIn(t,r,e,{fromUpdate:!0})});this.rootStore.next(n)},c.prototype.getCursor=function(t,r){return this.cursorBase(t,r,function(t,r){return 0<r.length?t[r[0]]:t})},c.prototype.setValue=function(t,r,e){return 0===r.length?(this.merge(t,e),!0):this.cursorBase(t,r,function(t,r){return t[r[0]]=e,!0})},c.prototype.cursorBase=function(t,r,e){var o=Array.isArray(r)?r:r.split(".");return 1<o.length?t.hasOwnProperty(o[0])&&"object"==typeof t[o[0]]?this.cursorBase(t[o[0]],o.slice(1),e):null:e(t,o)},c.prototype.isConstructorObject=function(t){return t.constructor===Object},c.prototype.isConstructorArray=function(t){return t.constructor===Array},c.prototype.extend=function(t,r,e){for(var o in void 0===e&&(e=!0),r)r.hasOwnProperty(o)&&(this.isConstructorArray(r[o])?t[o]=i(r[o]):e&&this.isConstructorObject(r[o])?t[o]=this.extend(t[o],r[o],e):t[o]=r[o]);return t},c);function c(){return null!==s&&s.apply(this,arguments)||this}var p=(f.decorators=[{type:r.NgModule,args:[{providers:[{provide:e.DataStrategy,useClass:a}]}]}],f);function f(){}t.ImmerDataStrategy=a,t.ImmerDataStrategyModule=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ng-state-immer-data-strategy.umd.min.js.map